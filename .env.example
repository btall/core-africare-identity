# =============================================================================
# core-africare-identity - Configuration des Variables d'Environnement
# =============================================================================
#
# Ce fichier sert de template pour les variables d'environnement requises.
# Copier ce fichier en .env et remplir les valeurs appropriées:
#
#   cp .env.example .env
#
# IMPORTANT: Ne jamais committer le fichier .env (il contient des secrets)
# =============================================================================

# -----------------------------------------------------------------------------
# Service Identity
# -----------------------------------------------------------------------------
PROJECT_NAME=core-africare-identity
PROJECT_SLUG=identity
ENVIRONMENT=development  # development|staging|production
DEBUG=false

# -----------------------------------------------------------------------------
# API Configuration
# -----------------------------------------------------------------------------
API_GATEWAY_URL=http://api-gateway-service:8000

# -----------------------------------------------------------------------------
# Keycloak Authentication
# -----------------------------------------------------------------------------
# URL du serveur Keycloak (sans /auth/ à la fin pour Keycloak 17+)
KEYCLOAK_SERVER_URL=https://keycloak.africare.app/auth
# Realm Keycloak pour l'authentification
KEYCLOAK_REALM=africare
# Client ID spécifique au service
KEYCLOAK_CLIENT_ID=core-africare-identity
# Client Secret (SENSIBLE - ne pas partager)
KEYCLOAK_CLIENT_SECRET=cYRi-B9OO2Ufd1h1n1SduA

# -----------------------------------------------------------------------------
# Webhook Security
# -----------------------------------------------------------------------------
# Secret partagé pour vérifier la signature des webhooks Keycloak (SENSIBLE)
# Générer avec: openssl rand -hex 32
WEBHOOK_SECRET=your-webhook-secret-here-change-this-in-production
# Tolérance du timestamp en secondes (défaut: 300 = 5 minutes)
WEBHOOK_SIGNATURE_TOLERANCE=300

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL 18 avec SQLAlchemy 2.0 (asyncpg driver)
# Format: postgresql+asyncpg://user:password@host:port/database
SQLALCHEMY_DATABASE_URI=postgresql+asyncpg://core-africare-identity:vd8bveedbnBpMcYr_8qB6A@postgres:5432/core-africare-identity

# -----------------------------------------------------------------------------
# Redis Messaging Configuration (Phase 1 MVP)
# -----------------------------------------------------------------------------
# URL Redis pour le messaging Pub/Sub
# Format: redis://host:port/db_number
REDIS_URL=redis://localhost:6379
# Numéro de base de données Redis (0-15, défaut: 0)
REDIS_DB=0

# -----------------------------------------------------------------------------
# OpenTelemetry Configuration
# -----------------------------------------------------------------------------
# Nom du service pour OpenTelemetry
OTEL_SERVICE_NAME=core-africare-identity

# OpenTelemetry Collector endpoint
OTEL_EXPORTER_OTLP_ENDPOINT=http://grafana-otel:4317
OTEL_EXPORTER_OTLP_PROTOCOL=grpc
OTEL_EXPORTER_OTLP_INSECURE=true

# Exporters (otlp|console)
OTEL_LOGS_EXPORTER=otlp
OTEL_TRACES_EXPORTER=otlp
OTEL_METRICS_EXPORTER=otlp

# Log levels
OTEL_LOG_LEVEL=info
OTEL_PYTHON_LOG_LEVEL=info

# Python logging auto-instrumentation
OTEL_PYTHON_LOGGING_AUTO_INSTRUMENTATION_ENABLED=true
OTEL_PYTHON_LOG_CORRELATION=true

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Origines autorisées (séparées par virgules ou format JSON)
# Ex: "http://localhost:3000,http://localhost:4200"
# ou: '["http://localhost:3000","http://localhost:4200"]'
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:4200,https://app.africare.sn

# Hosts de confiance (séparés par virgules ou format JSON)
TRUSTED_HOSTS=localhost,127.0.0.1,app.africare.sn,*.africare.sn

# -----------------------------------------------------------------------------
# Internationalisation (i18n)
# -----------------------------------------------------------------------------
# Langues supportées (séparées par virgules)
SUPPORTED_LOCALES=fr,en
# Langue par défaut
DEFAULT_LOCALE=fr

# =============================================================================
# Variables Spécifiques par Environnement
# =============================================================================
#
# DEVELOPMENT:
#   - DEBUG=true
#   - OTEL_LOGS_EXPORTER=console
#   - ALLOWED_ORIGINS=http://localhost:3000,http://localhost:4200
#
# STAGING:
#   - DEBUG=false
#   - ENVIRONMENT=staging
#   - OTEL_EXPORTER_OTLP_ENDPOINT=https://otel-collector-staging.africare.sn
#
# PRODUCTION:
#   - DEBUG=false
#   - ENVIRONMENT=production
#   - OTEL_EXPORTER_OTLP_ENDPOINT=https://otel-collector.africare.sn
#   - Utiliser UNIQUEMENT Managed Identity (pas de connection strings)
# =============================================================================
